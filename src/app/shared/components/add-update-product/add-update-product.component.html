<app-header title="Agregar producto" subtitle="A D M I N" [isModal]="true"></app-header>

<ion-content class="ion-padding">
  <div class="d-flex-center">
      <form [formGroup]="form" class="forms-auth ion-text-center" (ngSubmit)="onSubmit()" (keypress.enter)="onSubmit()">

        <ion-avatar *ngIf="form.value.image"><img [src]="form.value.image"/></ion-avatar>
        <ion-icon *ngIf="!form.value.image" class="image-icon" name="image-outline"></ion-icon><br>
        <ion-button (click)="takePicture()" size="small" shape="round">
          Imagen del producto
        </ion-button>

        <app-custom-input type="text" label="Nombre" icon="cube-outline" [control]="form.controls.name"></app-custom-input>
        <div class="validators" *ngIf="form.controls.name.errors && form.controls.name.touched">
          <div *ngIf="form.controls.name.errors?.['required']">El nombre es obligatorio</div>
          <div *ngIf="form.controls.name.errors?.['minlength']">El nombre debe ser minimo de 4 caracteres</div>
        </div>

        <app-custom-input type="number" label="Precio" icon="cash-outline" [control]="form.controls.price"></app-custom-input>
        <div class="validators" *ngIf="form.controls.price.errors && form.controls.price.touched">
          <div *ngIf="form.controls.price.errors?.['required']">El precio es obligatorio</div>
          <div *ngIf="form.controls.price.errors?.['min']">El precio minimo es 0</div>
        </div>

        <app-custom-input type="number" label="Unidades vendidas" icon="bar-chart-outline" [control]="form.controls.soldUnits"></app-custom-input>
        <div class="validators" *ngIf="form.controls.soldUnits.errors && form.controls.soldUnits.touched">
          <div *ngIf="form.controls.soldUnits.errors?.['required']">Las unidades vendidas son obligatorio</div>
          <div *ngIf="form.controls.soldUnits.errors?.['min']">Las unidades vendidas minimas son 0</div>
        </div>

        <ion-button type="submit" mode="ios" class="ion-margin" [disabled]="form.invalid">
          Agregar producto
          <ion-icon slot="end" name="checkmark-cicle-outline"></ion-icon>
        </ion-button>
      </form>
  </div>
</ion-content>